<% 
  html = ''
  pane = 'media-pane'
  if @material.present?
    case @material.medium.kind.to_sym
    when :video
      html << ui_video(@material)
    when :audio
      html << ui_audio(@material)
    else
      html << ui_document_viewer(@material.at_url)
    end 
  else
    subhtml = ''
    if @page
      subhtml << ui_header(@page.name, style: :h4)
      subhtml << markdown(@page.about, :html => @page.html)
    elsif @question && @question.lecture
      subhtml << ( render partial: "learn/questions/show", locals: { 
          question: @question,
          answer: @answer
        } 
      )
    elsif @assessment && @assessment.lecture
      subhtml << render(partial: "learn/assessments/assessment", locals: { assessment: @assessment })
    end

    html << %(
      <div class="row">
        <div class="#{css_columns(12)}">
          #{subhtml}
        </div>
      </div>) if subhtml.present?
  end
%>

$("#<%= pane %>").html('<%= j html.html_safe %>');
$("#<%= pane %> audio.mediaelementjs").mediaelementplayer();
<% if @correct_answer %>
  <% @correct_answer.each do |id, a| %>
    <%
    html = ''
    if  %w(pick_one pick_many).include?(@question.kind)
      html = %(
        <i class="fa fa-check"></i>
      ) if a == '1'
    else
      html = %(
        <strong>#{Question.human_attribute_name(:answer)}</strong>: <span>#{a}</span>
      )
    end
    %>
    $('#<%= id %>').html('<%= j html.html_safe %>');
  <% end %>
<% end %>


// $("#<%= pane %> video.sublime").each(function(){
//   sublime.prepare($(this).attr('id'), function(player) {
//   // player is now ready.
//   });
// });
mark_as_taken = <%= @mark_as_taken.present? %>;
lecture_pager_position = <%= params[:position] ? params[:position] : 1 %>
ui_rebind_application_events(jQuery);