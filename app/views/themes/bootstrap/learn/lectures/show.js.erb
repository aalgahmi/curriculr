<% 
  html = ''
  pane = 'media-pane'
  if @material.present?
    case @material.medium.kind.to_sym
    when :video
      html << ui_video(@material, nil, :autoplay => true)
    when :audio
      html << ui_audio(@material, :autoplay => true)
    else
      html << ui_document_viewer(@material.at_url)
    end 
  else
    subhtml = ''
    if @page
      subhtml << ui_header(@page.name, style: :h4)
      subhtml << markdown(@page.about, :html => @page.html)
    elsif @question && @question.lecture
      subhtml << ( render partial: "learn/questions/show", locals: { 
          question: @question,
          answer: @answer,
          result: @result
        } 
      )
    elsif @assessment && @assessment.lecture
      subhtml << render(partial: "learn/assessments/assessment", locals: { assessment: @assessment })
    end

    html << %(
      <div class="row">
        <div class="#{css_columns(12)}">
          #{subhtml}
        </div>
      </div>) if subhtml.present?
  end
%>

$("#<%= pane %>").html('<%= j html.html_safe %>');
$("#<%= pane %> audio.mediaelementjs").mediaelementplayer();
<% if @correct_answer %>
  <% @correct_answer.each do |id, a| %>
    <%
    html = content_tag :div, :style => 'display: none;' do
      if  %w(pick_one pick_many).include?(@question.kind)
         a == '1' ? %(<i class="fa fa-check"></i>).html_safe : ''
      else
        %(<strong>#{Question.human_attribute_name(:answer)}</strong>: <span>#{a}</span>).html_safe 
      end
    end
    %>
    $('#<%= id %>').html('<%= j html.html_safe %>');
  <% end %>
<% end %>

mark_as_taken = <%= @mark_as_taken.present? %>;
lecture_pager_position = <%= params[:position] ? params[:position] : (@question && @question.order > 0? @question.order - 1 : 1) %>
ui_rebind_application_events(jQuery);

